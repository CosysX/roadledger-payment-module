<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [getBalance][1]
    -   [Examples][2]
-   [generate_address][3]
    -   [Parameters][4]
-   [generate_addresses][5]
    -   [Parameters][6]
-   [createServer][7]
    -   [Parameters][8]
    -   [Examples][9]
-   [onEvent][10]
    -   [Parameters][11]
    -   [Examples][12]
-   [createPaymentRequest][13]
    -   [Parameters][14]
    -   [Examples][15]
-   [getPaidPayments][16]
    -   [Examples][17]
-   [getPaidPayments][18]
    -   [Examples][19]
-   [getPaidPayments][20]
    -   [Examples][21]
-   [payment][22]
    -   [Examples][23]
-   [sendPayout][24]
    -   [Parameters][25]
    -   [Examples][26]
-   [payoutValidator][27]
    -   [Parameters][28]
    -   [Examples][29]
-   [payoutValidator][30]
    -   [Parameters][31]
    -   [Examples][32]
-   [payoutValidator][33]
    -   [Parameters][34]
    -   [Examples][35]
-   [payoutValidator][36]
    -   [Parameters][37]
    -   [Examples][38]

## getBalance

Returns the balance

### Examples

```javascript
// get payout by txhash
paymentModule.getBalance()
 .then(balance => {
     console.log(balance)
   })
 .catch(err => {
   console.log(err)
 })
//example balance:
15
```

Returns **[number][39]** balance

## generate_address

### Parameters

-   `seed` **[string][40]** 
-   `index` **[number][39]** 
-   `security` **[number][39]** 
-   `checksum` **[boolean][41]** 

Returns **[string][40]** 

## generate_addresses

### Parameters

-   `seed` **[string][40]** 
-   `startindex` **[number][39]** 
-   `endindex` **[number][39]** 
-   `security` **[number][39]** 
-   `checksum` **[boolean][41]** 

Returns **[Array][42]&lt;any>** 

## createServer

Creates and returns a express server.

### Parameters

-   `app` **[object][43]** an express application.
-   `options` **[object][43]** an options object. (optional, default `{}`)
    -   `options.websockets` **[Boolean][41]** websockets.
    -   `options.dashboard` **[Boolean][41]** dashboard at /iotapay.
    -   `options.api` **[Boolean][41]** api at /iotapay/api.

### Examples

```javascript
// creates a simple server
var paymentModule = require('iota-payment')
var app = require('express')()

let server = paymentModule.createServer(app, {api: true})

// Start server with iota-payment api on '/iotapay/api'
server.listen(3000, function () {
   console.log(`Server started on http://localhost:3000 `)
})
```

Returns **[object][43]** an http server

## onEvent

This method attaches an event listener.
Possible events:
\-payments: 'paymentCreated', 'paymentPending', 'paymentIncoming', 'paymentSuccess'
\-payouts: 'payoutCreated', 'payoutSent'

### Parameters

-   `event` **[object][43]** event name
-   `fnc` **[function][44]** the function which will be called

### Examples

```javascript
const paymentModule = require('iota-payment')

//Create an event handler which is called, when a payment was successfull
let onPaymentSuccess = function (payment) {
    console.log('payment success!', payment);
}

//Assign the event handler to an event:
paymentModule.onEvent('paymentSuccess', onPaymentSuccess);
```

## createPaymentRequest

Creates and returns a payment.

### Parameters

-   `paymentInput` **[object][43]** data for the payment
    -   `paymentInput.value` **[number][39]?** iota value
    -   `paymentInput.timeUntilConfirmation` **[number][39]?** time in seconds until the payment is confirmed, independent of the received amount
    -   `paymentInput.data` **any?** additional data

### Examples

```javascript
// create a payment with the value option
paymentModule.createPaymentRequest({value: 1, data: { "test": "123" }})
 .then(payment => {
   console.log(payment)
 })
 .catch(err => {
   console.log(err)
 })
//example payment:
{ data: '',
paid: false,
txInfo: null,
type: 'value',
value: 1,
address:
 'IDEAVKKGLZUCAZJEWOUXVCUYGPSINKJR9UVBEOXRNIOBJFAKUN9GVBDGVEVOOK9HVMMMFMDLZ9G9YFHPWULQWCXYVW',
index: 49,
id: '1575750004195'}
// create a payment with the timeUntilConfirmation option
paymentModule.createPaymentRequest({timeUntilConfirmation: 180, data: { "test": "123" }})
 .then(payment => {
   console.log(payment)
 })
 .catch(err => {
   console.log(err)
 })
//example payment:
{ data: { test: '123' },
paid: false,
txInfo: null,
type: 'time',
confirmationTime: 1575750870,
address:
 'BQGQONEUNQYDDEUFDZIJDTVTFUBSIQECBLPU9BNNDVPMXMKFCWYODBGSPHA9TYCFFSYGUH9OIZYDIGBMCXHRBEIIAX',
index: 50,
id: '1575750690816' }
```

Returns **[object][43]** payment

## getPaidPayments

Returns all payments

### Examples

```javascript
// get payments
paymentModule.getPayments()
 .then(payments => {
   console.log(payments)
 })
 .catch(err => {
   console.log(err)
 })
//example payments:
[ { address:
  'CLHNILYEPUQYJWRSGPQGA9BVVKHFHQMDM9ENNSGAHJXJIOLMBARZNHKWZZVGXSSQITOHPD9JXQGVQJJJBKMVRFWSNW',
 index: 10,
 value: '0',
 data: 'test',
 paid: true,
 id: '1570466750915',
 lastTime: 1570466754629 },
{ address:
  'CLTDMWYNTKMPSISD9CBLH9MGATUZQXDALPZQBMHPJQLTKDTWDKFRJQYDKUCPYQFTFPNJBEIHHJRBKQMXXHNSUYEXJC',
 index: 12,
 value: 1,
 paid: false,
 id: '1570564499942' } ]
```

Returns **[Array][42]&lt;[Object][43]>** payments

## getPaidPayments

Returns all open (not paid and not too old) payments

### Examples

```javascript
// get open payments
paymentModule.getPayments()
 .then(payments => {
   console.log(payments)
 })
 .catch(err => {
   console.log(err)
 })
//example payments:
[ { address:
  'QXHAEPJSEIUAMMOUWDGYJD9MPPIGBYOPAQSPOZK9VZSGDVVV9SUJEYVXYRFL9KRRBWSDNIFGBDLH9DBADGABSCFTFD',
 index: 11,
 value: 1,
 data: { test: '123' },
 paid: false,
 id: '1570554460662' },
{ address:
  'CLTDMWYNTKMPSISD9CBLH9MGATUZQXDALPZQBMHPJQLTKDTWDKFRJQYDKUCPYQFTFPNJBEIHHJRBKQMXXHNSUYEXJC',
 index: 12,
 value: 1,
 paid: false,
 id: '1570564499942' } ]
```

Returns **[Array][42]&lt;[Object][43]>** open payments

## getPaidPayments

Returns all paid (not open and not too old) payments

### Examples

```javascript
// get open payments
paymentModule.getPaidPayments()
 .then(payments => {
   console.log(payments)
 })
 .catch(err => {
   console.log(err)
 })
//example payments:
[ { address:
  'QXHAEPJSEIUAMMOUWDGYJD9MPPIGBYOPAQSPOZK9VZSGDVVV9SUJEYVXYRFL9KRRBWSDNIFGBDLH9DBADGABSCFTFD',
 index: 11,
 value: 1,
 data: { test: '123' },
 paid: true,
 id: '1570554460662' },
{ address:
  'CLTDMWYNTKMPSISD9CBLH9MGATUZQXDALPZQBMHPJQLTKDTWDKFRJQYDKUCPYQFTFPNJBEIHHJRBKQMXXHNSUYEXJC',
 index: 12,
 value: 1,
 paid: true,
 id: '1570564499942' } ]
```

Returns **[Array][42]&lt;[Object][43]>** paid payments

## payment

Returns payment by id

### Examples

```javascript
// get payment by id
paymentModule.getPaymentByID('1570564499942')
 .then(payment => {
   console.log(payment)
 })
 .catch(err => {
   console.log(err)
 })
//example payment:
{ address:
  'CLTDMWYNTKMPSISD9CBLH9MGATUZQXDALPZQBMHPJQLTKDTWDKFRJQYDKUCPYQFTFPNJBEIHHJRBKQMXXHNSUYEXJC',
 index: 12,
 value: 1,
 paid: false,
 id: '1570564499942' }
```

Returns **[Object][43]** payment

## sendPayout

Creates and returns a payout.

### Parameters

-   `payoutData` **[object][43]** data for the payout
    -   `payoutData.address` **address** 90 trytes iota address (with checksum)
    -   `payoutData.amount` **[number][39]** amount of iotas
    -   `payoutData.message` **[string][40]?** message which will be send with the transaction
    -   `payoutData.tag` **[string][40]?** tryte tag
    -   `payoutData.data` **any?** additional data, is only stored locally
    -   `payoutData.startIndex` **[number][39]?** custom start index to search for inputaddresses
    -   `payoutData.endIndex` **[number][39]?** custom end index to search for inputaddresses

### Examples

```javascript
// create a payout
let payoutObject = {
  //required
  address: 'HW99PKRDWBUCCWLEQDONQXW9AXQHZAABYEKWSEFYAUIQWWCLVHAUJEQAZJACAGPZBZSQJIOUXRYYEXWZCXXOAJMZVY',
  value: 1,
  //optional
  message: 'Example message',
  tag: 'TRYTETAG',
  data: {test: 27},
  //indexes for input addresses, only required in special cases
  // startIndex: 0,
  // endIndex: 1
}
paymentModule.sendPayout(payoutObject)
 .then(payout => {
   console.log(payout)
 })
 .catch(err => {
   console.log(err)
 })
//example payout:
{ address:
 'HW99PKRDWBUCCWLEQDONQXW9AXQHZAABYEKWSEFYAUIQWWCLVHAUJEQAZJACAGPZBZSQJIOUXRYYEXWZCXXOAJMZVY',
value: 1,
message: 'Example message',
tag: 'TRYTETAG',
data: {test: 27},
paid: false,
id: '1570619992125' }
```

Returns **[object][43]** payout

## payoutValidator

Returns all payouts

### Parameters

-   `$0` **[Object][43]**  (optional, default `{}`)
    -   `$0.address`  
    -   `$0.value`  
    -   `$0.message`  
    -   `$0.tag`  
    -   `$0.data`  
    -   `$0.startIndex`  
    -   `$0.endIndex`  

### Examples

```javascript
// get payouts
paymentModule.getPayouts()
 .then(payouts => {
   console.log(payouts)
 })
 .catch(err => {
   console.log(err)
 })
//example payouts:
[
 {
   "address": "USKSGFKPWVXD9EUOJXWNLVWG9FDTIPGBUYB9BQNMMUWIEOMFNDCCUKCJMEPRICBHZNRAIZFGNPK9GCGBYQAEWNJRMC",
   "value": 1,
   "message": "Example message",
   "paid": true,
   "id": "1570616325073",
   "txhash": "XKLLL9B9AUN9EASCAQAQHEYDLLEUDDUCOTJVNTJUSZVTNWUTDPHZUFUJAHFZJOSQYYEPJSWRDXDJ99999"
 },
 {
   "address": "HW99PKRDWBUCCWLEQDONQXW9AXQHZAABYEKWSEFYAUIQWWCLVHAUJEQAZJACAGPZBZSQJIOUXRYYEXWZCXXOAJMZVY",
   "value": 1,
   "message": "Example message",
   "paid": false,
   "id": "1570616561382"
 }
]
```

Returns **[Array][42]&lt;[Object][43]>** payouts

## payoutValidator

Returns open payouts

### Parameters

-   `$0` **[Object][43]**  (optional, default `{}`)
    -   `$0.address`  
    -   `$0.value`  
    -   `$0.message`  
    -   `$0.tag`  
    -   `$0.data`  
    -   `$0.startIndex`  
    -   `$0.endIndex`  

### Examples

```javascript
// get open payouts
paymentModule.getOpenPayouts()
 .then(payouts => {
   console.log(payouts)
 })
 .catch(err => {
   console.log(err)
 })
//example payouts:
[
 {
   "address": "HW99PKRDWBUCCWLEQDONQXW9AXQHZAABYEKWSEFYAUIQWWCLVHAUJEQAZJACAGPZBZSQJIOUXRYYEXWZCXXOAJMZVY",
   "value": 1,
   "message": "Example message",
   "paid": false,
   "id": "1570616561382"
 }
]
```

Returns **[Array][42]&lt;[Object][43]>** open payouts

## payoutValidator

Returns payout by id

### Parameters

-   `$0` **[Object][43]**  (optional, default `{}`)
    -   `$0.address`  
    -   `$0.value`  
    -   `$0.message`  
    -   `$0.tag`  
    -   `$0.data`  
    -   `$0.startIndex`  
    -   `$0.endIndex`  

### Examples

```javascript
// get payout by id
paymentModule.getPayoutByID('1570611186704')
 .then(payout => {
   console.log(payout)
 })
 .catch(err => {
   console.log(err)
 })
//example payout:
{ address:
 'USKSGFKPWVXD9EUOJXWNLVWG9FDTIPGBUYB9BQNMMUWIEOMFNDCCUKCJMEPRICBHZNRAIZFGNPK9GCGBYQAEWNJRMC',
value: 1,
message: 'Example message',
paid: false,
id: '1570611186704' }
```

Returns **[Object][43]** payment

## payoutValidator

Returns payout by txhash

### Parameters

-   `$0` **[Object][43]**  (optional, default `{}`)
    -   `$0.address`  
    -   `$0.value`  
    -   `$0.message`  
    -   `$0.tag`  
    -   `$0.data`  
    -   `$0.startIndex`  
    -   `$0.endIndex`  

### Examples

```javascript
// get payout by txhash
paymentModule.getPayoutByTxhash('XKLLL9B9AUN9EASCAQAQHEYDLLEUDDUCOTJVNTJUSZVTNWUTDPHZUFUJAHFZJOSQYYEPJSWRDXDJ99999')
 .then(payout => {
  console.log(payout)
 })
 .catch(err => {
    console.log(err)
  })
//example payout:
{ address:
 'USKSGFKPWVXD9EUOJXWNLVWG9FDTIPGBUYB9BQNMMUWIEOMFNDCCUKCJMEPRICBHZNRAIZFGNPK9GCGBYQAEWNJRMC',
value: 1,
message: 'Example message',
paid: true,
id: '1570616325073',
txhash:
 'XKLLL9B9AUN9EASCAQAQHEYDLLEUDDUCOTJVNTJUSZVTNWUTDPHZUFUJAHFZJOSQYYEPJSWRDXDJ99999' }
```

Returns **[Object][43]** payment

## 

WebSockets with socket.io

backend:
[https://github.com/machineeconomy/iota-payment/blob/master/examples/06_websockets.js][45]

frontend:
[https://github.com/machineeconomy/iota-payment/blob/master/examples/06_websocket.html][46]

[1]: #getbalance

[2]: #examples

[3]: #generate_address

[4]: #parameters

[5]: #generate_addresses

[6]: #parameters-1

[7]: #createserver

[8]: #parameters-2

[9]: #examples-1

[10]: #onevent

[11]: #parameters-3

[12]: #examples-2

[13]: #createpaymentrequest

[14]: #parameters-4

[15]: #examples-3

[16]: #getpaidpayments

[17]: #examples-4

[18]: #getpaidpayments-1

[19]: #examples-5

[20]: #getpaidpayments-2

[21]: #examples-6

[22]: #payment

[23]: #examples-7

[24]: #sendpayout

[25]: #parameters-5

[26]: #examples-8

[27]: #payoutvalidator

[28]: #parameters-6

[29]: #examples-9

[30]: #payoutvalidator-1

[31]: #parameters-7

[32]: #examples-10

[33]: #payoutvalidator-2

[34]: #parameters-8

[35]: #examples-11

[36]: #payoutvalidator-3

[37]: #parameters-9

[38]: #examples-12

[39]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[40]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[41]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[42]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[43]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[44]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[45]: https://github.com/machineeconomy/iota-payment/blob/master/examples/06_websockets.js

[46]: https://github.com/machineeconomy/iota-payment/blob/master/examples/06_websocket.html
